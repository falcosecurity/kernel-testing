# These variables are shared among all roles.

# Time in seconds to wait for the hosts to be available after the virtual machines are newly created.
time_out: 600

#user used to log in to virtual machine and used to administer the cluster through cli tools
remote_user: root 

#########################
# Machine Configuration #
#########################

# The default base rootfs for the VMs. We have a dedicated variable here since it is static.
# If you need to match a given kernel with a specific base rootfs then change it in the machine entry.
defaultBaserootfs: "therealbobo/ubuntu-rootfs:23.04"

# Each machine entry requires the following fields
# name: the name given to the vm;
# kernel: reference to an oci rootfs containing a kernel;
# rootfs: reference to an oci rootfs used as base rootfs for the vm.
machines:
  - {name: "arch-5.18",kernel: "therealbobo/arch-kernel:5.18", rootfs: "therealbobo/arch-image:5.18"}
  - {name: "arch-6.0",kernel: "therealbobo/arch-kernel:6.0", rootfs: "therealbobo/arch-image:6.0"}
  - {name: "fedora-38",kernel: "therealbobo/fedora-kernel:38-6.2.9", rootfs: "therealbobo/fedora-image:38-6.2.9"}
  - {name: "fedora-36",kernel: "therealbobo/fedora-kernel:36-5.17.5", rootfs: "therealbobo/fedora-image:36-5.17.5"}
  - {name: "fedora-33",kernel: "therealbobo/fedora-kernel:33-5.8.15", rootfs: "therealbobo/fedora-image:33-5.8.15"}
  - {name: "ubuntu-23.04-6.3.0",kernel: "therealbobo/ubuntu-kernel:23.04-6.3.0", rootfs: "therealbobo/ubuntu-image:23.04-6.3.0"}
  - {name: "centos-4.18",kernel: "therealbobo/centos-kernel:4.18", rootfs: "therealbobo/centos-image:4.18"}
  - {name: "amz-linux-2023-6.1.34",kernel: "therealbobo/amazonlinux2023-kernel:6.1.34", rootfs: "therealbobo/amazonlinux2023-image:6.1.34"}
  - {name: "amz-linux-2022-5.15.73",kernel: "therealbobo/amazonlinux2022-kernel:5.15.73", rootfs: "therealbobo/amazonlinux2022-image:5.15.73"}
  - {name: "amz-linux-5.15",kernel: "therealbobo/amazonlinux2-kernel:5.15", rootfs: "therealbobo/amazonlinux2-image:5.15"}
  - {name: "oracle-linux-5.15",kernel: "therealbobo/oraclelinux-kernel:5.15", rootfs: "therealbobo/oraclelinux-image:5.15"}
  - {name: "oracle-linux-5.4",kernel: "therealbobo/oraclelinux-kernel:5.4", rootfs: "therealbobo/oraclelinux-image:5.4"}



# Kernel that does not support running execve with null argv: `https://github.com/torvalds/linux/commit/dcd46d897adb70d63e025f175a00a89797d31a43`
# We need to disable the tests calling the execve syscall.
execve_bug_kernels:
  - "5.12.19"
  - "5.13.19"
  - "5.14.21"

no_btf_support:
  - "centos-4.18"
  - "amz-linux-5.15"
  - "fedora-33"
  - "oracle-linux-5.4"

# Number of cpus.
cpus: 2
# Memory size in GB.
memory: 2

#####################
# SSH configuration #
#####################

#Path to the generated SSH private key file
ssh_key_path: "/home/aldo/.ssh/"
ssh_key_name: ignite_machines

#Path to the private key
prv_key_path: "{{ssh_key_path}}/{{ssh_key_name}}"

#path to the public key used to ssh to the machines, if this key does not exist then a new one is generated with the same name
pub_key_path: "{{ssh_key_path}}/{{ssh_key_name}}.pub"


# Repositories to be cloned on the local machine and copied to the VMs
# Each repos entry requires the following fields:
# name: the folder name where the repo will be cloned. Root folder under ./roles/git-repos/files/repos
# repo: git, SSH, or HTTP(S) protocol address of the git repository;
# version: What version of the repository to check out. This can be the literal string HEAD, 
# a branch name, a tag name. It can also be a SHA-1 hash, in which case refspec needs to be 
# specified if the given revision is not already available. If not set the default value is "HEAD".
# refspec: Add an additional refspec to be fetched. If version is set to a SHA-1 not reachable 
# from any branch or tag, this option may be necessary to specify the ref containing the SHA-1. 
# Uses the same syntax as the git fetch command. An example value could be “refs/meta/config”.
# Docs ref: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/git_module.html
repos:
 libs: {name: "falcosecurity-libs", repo: "https://github.com/falcosecurity/libs.git", version: "0.11.3"}

local_repos_folder: "./roles/git-repos/files/repos"
remote_repos_folder: "/root"
